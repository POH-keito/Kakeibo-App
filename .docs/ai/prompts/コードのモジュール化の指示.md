# コードのモジュール化の指示

## 使い所

Google AI Studio などで、index.tsx や App.tsx などの大きなファイルをリファクタリングしたいときに使います。
この指示を使うことで、コードを自然にモジュール化し、可読性や再利用性を向上させることができます

## 使い方

この指示は、コードをモジュール化して整理するための 3 つのステップに分かれています。各ステップは、コードの特定の部分を分離して、より小さな、再利用可能なコンポーネントやフックに変換することを目的としています。
これにより、コードの可読性と保守性が向上します。以下の手順に従って、AI に指示を出していきます。
まず、リファクタリングしたいコード全体を AI に提示し、次に以下のスニペットを順番に一つずつ貼り付けて実行します。

---

### \#\# コピペで使える！リファクタリング指示スニペット 3 選

```plain
ソフトウェア工学的にも、実務上も合理的なレベルにとどめつつ、
```

#### **ステップ 1：型定義の分離スニペット**

まず、コードの「設計図」にあたる型定義を専用ファイルにまとめます。

```plain
ソフトウェア工学的にも、実務上も合理的なレベルにとどめつつ、
このコード全体を解析し、`type` または `interface` で定義されている全ての型定義を抽出してください。
抽出した型定義を、`src/types.ts` という新しいファイルに移動させてください。
最後に、元のコードが新しい `src/types.ts` から型を import するように修正してください。
```

---

#### **ステップ 2：UI コンポーネントの分離スニペット**

次に、見た目の部品を一つずつ切り出していきます。**このスニペットは、部品として分けたいものの数だけ繰り返し使います。**

```plain
ソフトウェア工学的にも、実務上も合理的なレベルにとどめつつ、
このReactコンポーネントの中から、UI部品として独立させられる部分を見つけてください。例えば、ヘッダー、グラフ、テーブル、入力フォームなどが考えられます。
その部分を、最も適切だと思われる名前を付けた新しいReactコンポーネントとして、`src/components/` ディレクトリ配下に新しいファイルとして切り出してください。
新しいコンポーネントは「表示に特化」させ、必要なデータや関数はすべて `props` で受け取るように設計してください。元のコンポーネントは、この新しいコンポーネントを呼び出す形に修正してください。
```

**使い方**:
上記の指示で例えば「テーブル」が分割されたら、もう一度同じ指示を貼り付けて、次は「グラフ」を分割させる、というように繰り返してください。

---

#### **ステップ 3：ロジックの分離スニペット**

最後に、コンポーネント内に残ったデータ処理などのロジックを専用ファイルにまとめます。

```plain
ソフトウェア工学的にも、実務上も合理的なレベルにとどめつつ、
このコンポーネント内にある、状態管理（`useState`）と副作用（`useEffect`）に関連するビジネスロジックを特定してください。
これらのロジックを、`use` から始まる適切な名前を付けた「カスタムフック」として、`src/hooks/` ディレクトリ配下に新しいファイルとして切り出してください。
このカスタムフックは、コンポーネントが必要とする状態（データ、ローディング状態など）と、その状態を更新するための関数をまとめて返すように設計してください。元のコンポーネントは、このカスタムフックを利用してロジックを簡潔に記述するように修正してください。
```

**ポイント**:
この 3 ステップの指示を順番に行うだけで、専門知識がなくても、AI との対話を通じてコードが自然と整理されていきます。ぜひご活用ください。

